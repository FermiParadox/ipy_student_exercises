#:kivy 1.9.2

#:import main main
#:import languages languages
#:import about_module about_module


<Label>:
    markup: True
    color: 0,0,0,1

<Button>:
    background_normal: 'own_images/simple_grey_button.png'
    background_down: 'own_images/simple_grey_button_pressed.png'
    background_disabled_normal: self.background_down

<GridLayout>:
    grid_background: main.BACKGROUND_COLOR

    canvas.before:
        Color:
            rgba: main.BACKGROUND_COLOR or self.grid_background     # Property is None at initialising raising error
        Rectangle:
            pos: self.pos
            size: self.size

# Class code below (including the corresponding in main.py)
# by Alexander Taylor
# from https://github.com/kivy/kivy/wiki/Scrollable-Label
<ConfinedTextLabel>:
    color: 0,0,0,1
    text_size: self.width * .8, None
    size_hint_y: None
    height: self.texture_size[1]

<ScrollLabel>:
    text: ''
    color: 0,0,0,1
    font_size: 15
    ConfinedTextLabel:
        text: root.text
        color: root.color
        font_size: root.font_size


# -------------------------------------------------------------------------------
<MainWidget>:
    canvas.before:
        Color:
            rgba: main.BACKGROUND_COLOR
        Rectangle:
            pos: self.pos
            size: self.size


    FloatLayout:
        Label:
            id: version_label
            pos_hint: {'center_x': .8, 'center_y': .07}
            size_hint: .9, .2
            text: '{} {}'.format('version', main.__version__)
            font_size: '12sp'
        Label:
            pos_hint: {'center_x': .5, 'center_y': .8}
            size_hint: .9, .1
            text: main.APP_NAME
            font_size: '30sp'
        BoxLayout:
            pos_hint: {'center_x': .5, 'center_y': .5}
            size_hint: .5, .35
            orientation: 'vertical'

            Button:
                text: 'Play'
                bold: True
                border: 0,0,0,0
                on_release: root.load_slide(play_page)
            Button:
                text: 'Treasures'
                border: 0,0,0,0
                bold: True
                on_release: root.load_slide(treasures_page)
            Button:
                text: 'History'
                border: 0,0,0,0
                on_release: root.load_slide(history_page)
            Button:
                text: 'About'
                border: 0,0,0,0
                on_release: root.load_slide(about_page)
            Button:
                text: 'Attributions'
                border: 0,0,0,0
                on_release: root.load_slide(attributions_page)

    BoxLayout:
        id: play_page
        orientation: 'vertical'
        ScrollLabel:
            size_hint_y: .1
            text: root.exercise.question_title
            font_size: '15sp'
        LatexWidget:
            text: root.exercise.question_in_latex
            size_hint_y: .1
        AnswersInputBox:
            id: answers_input_box
            size_hint_y: .4
            padding: '3sp'
            exercise: root.exercise
            answers_given: {k: '' for k in root.exercise.answers}
        Button:
            text: languages.CHECK_MY_ANSWER_MSG
            background_color: 0,1,0,1
            border: 0,0,0,0
            size_hint_y: None
            height: '30sp'
            on_release: if root.exercise.check_all_answers(answers_given=answers_input_box.answers_given): print(6666)
        Label:
            size_hint_y: .4


    BoxLayout:
        id: about_page
        orientation: 'vertical'
        Label:
            size_hint_y: .1
            text: 'About'
            font_size: '20sp'
            bold: True
        ScrollLabel:
            text: about_module.ABOUT_TEXT